<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>telepaint viewer (E2E)</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <header>
    <h1>telepaint <small>E2E</small></h1>
    <div class="controls">
      <label>Refresh (s): <input id="interval" type="number" min="5" value="15"></label>
      <button id="refresh">Jetzt laden</button>
      <button id="change-pass">Passwort ändern</button>
      <span id="status">–</span>
    </div>
  </header>

  <main>
    <canvas id="c" width="1000" height="600"></canvas>
  </main>

  <footer>
    <small>Quelle: <code>/session/aljoscha.json</code> + <code>/session/freundin.json</code>. 
    Unterstützt Klartext-JSON <em>oder</em> verschlüsseltes JSON (AES-256-GCM, PBKDF2).</small>
  </footer>

  <div id="modal" class="modal hidden">
    <div class="modal-card">
      <h2>Passwort eingeben</h2>
      <p>Das Passwort wird nur lokal im Browser genutzt (PBKDF2 + AES-GCM). Es wird nirgends gespeichert.</p>
      <input type="password" id="pw" placeholder="Passwort" autocomplete="current-password" />
      <div class="modal-actions">
        <button id="ok">OK</button>
        <button id="cancel">Abbrechen</button>
      </div>
      <div class="hint">Hinweis: Falls die Dateien unverschlüsselt sind, kannst du ohne Passwort fortfahren.</div>
    </div>
  </div>

  <script>
    // Konfiguration
    window.TELEPAINT = {
      files: ["session/aljoscha.json","session/freundin.json"],
      colors: ["#111","#d22"],
      iterations: 200000,      // PBKDF2 Iterationen
      hash: "SHA-256"
    };
  </script>
  <script src="assets/viewer.js"></script>
</body>
</html>
